<!DOCTYPE html>
<html lang="en" manifest="manifest.appcache">
<head>
    <meta charset="utf-8">                                                       

    <title><%= full_title(yield(:title)) %></title>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!--
      echo $this->Html->charset();                                             
      echo $this->Html->meta('icon');                                           
      echo 'debugAppCache.js' 
    -->

    <%= stylesheet_link_tag 'application', 
                            media: 'all', 'data-turbolinks-track' => true %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    <%= csrf_meta_tags %>

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />          
    <script type="text/javascript"                                               
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDBlGDVvFbD4gIC4l6G-E6bZVQlSi2GTic&sensor=false&libraries=places">
    </script>

    <script type="text/javascript">                                              
                                                                                 
        // Enable the visual refresh                                             
        google.maps.visualRefresh = true;                                        
                                                                                 
        var MAP;                                                                 
                                                                                 
        function initialize() {                                                  
            var mapOptions = {                                                   
                center: new google.maps.LatLng(20.674226, -103.387363),          
                zoom: 15,                                                        
                maxZoom: 18,                                                        
                disableDefaultUI: true,                                          
                mapTypeId: google.maps.MapTypeId.ROADMAP,                        
                zoomControl: true,                                               
                zoomControlOptions: {                                            
                    position: google.maps.ControlPosition.RIGHT_CENTER           
                }                                                                
            };                                                                   
                                                                                 
            MAP = new google.maps.Map(document.getElementById('map-canvas'),     
                                      mapOptions);                               
                                                                                 
            /* Delay customizations until the map has loaded */                     
            google.maps.event.addListenerOnce(MAP, 'tilesloaded', function(evt) {

                monitor_ajax.updateTaxiLocationsOnMap(MAP);

                // monitor_ajax.addCustomControls(MAP);                                                          
                                                                                 
                /* Must be called after addCustomControls() */                                   
                addSearchBox(MAP, document.getElementById('searchBoxA'));                             
                addSearchBox(MAP, document.getElementById('searchBoxB'));                             
               
                /* Add Services window. */ 
                var servicesList = monitor_controls.buildServicesList();
                MAP.controls[google.maps.ControlPosition.LEFT_TOP].push(servicesList);
                monitor_ajax.updateServicesList(servicesList);
                                                                                 

                /* Add Service form. */ 
                var serviceForm = monitor_controls.buildServiceForm();
                MAP.controls[google.maps.ControlPosition.BOTTOM_CENTER].push(serviceForm);
            });                                                                  
        }                                                                        
                                                                                 
        google.maps.event.addDomListener(window, 'load', initialize);            
    </script>  

</head>
<body>

    <%= render 'layouts/shared/header_monitor' %>

    <div>                                                      
        <div id="map-canvas"></div>                                                                   
    </div> 
    
    <% yield %>

    <input id="searchBoxA" type="text" placeholder="Origen" size=40 style="display: none">          
    <input id="searchBoxB" type="text" placeholder="Destino" size=40 style="display: none">          

</body>
</html>
